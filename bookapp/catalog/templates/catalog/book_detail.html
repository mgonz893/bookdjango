{% extends "base_generic.html" %}

{% block content %}

<form action="{{book.get_add_to_wishlist_url}}" method="post">{% csrf_token %}
{% if user.is_authenticated %}
  <p><strong>Add to Wishlist: </strong>
  <select name="wish_value">
    <option value="">---------</option>
    {% for wish in user.wishlist_set.all %}
    <option value="{{ wish.id }}">
        {{ wish.name }}
    </option>
    {% endfor %}
  </select>
  <button type="submit">Save</button></a>
  <p></p>
  </form>
  {% endif %}
  <h1>Title: {{ book.title }}</h1>
  <p><strong>Description: </strong> {{ book.summary }}</p>
  <p><strong>Publishing Info: </strong>{{ book.publisher }}</p> 
  <p><strong>Publishing Date: </strong>{{ book.publishing_date }}</p> 
  <p><strong>Genre: </strong> {{ book.genre.all|join:", " }}</p> 
  <p><strong>Author: </strong> <a href="../author/?q={{ book.author.first_name }}+{{ book.author.last_name }}" title="Click here to search books by author!">{{book.author}}</a>
  <p><strong>Author Biography: </strong>{{ book.author.biography }}
  <p><strong>Cover: </strong><a href="{{book.model_pic.url}}">
  <img src="{{book.model_pic.url}}" width="240"></img></a></p>
  <p><strong>Average Rating: {{average.avge}} </strong></p>
  {% if user.is_authenticated %}
  {% for ordered in orderedbook %}
  {% if ordered.ordered == True %}
  <p><strong><a href="{{ book.new_book_rating_url }}"> <button type="button">Create Customer Review</button> </a></strong></p>
  {% endif %}
  {% endfor %} 
  {% endif %}
  <p><strong>Submitted Comments & Rating: </strong></p>
  {% for ratings in rating %}
  <li>{{ratings.user}}: {{ratings.review}} <p>Rating: {{ratings.rating}} stars</p></li>
  {% endfor %}
  {% if user.is_authenticated %}
  <a href="{{book.get_add_to_cart_url}}"> <button type="button">Add to Cart</button> </a>
  <a href="{{book.get_remove_from_cart_url}}"> <button type="button">Remove from Cart</button> </a>
  {% endif %}
{% endblock %}