{% extends "base_generic.html" %}

{% block content %}
{% if user.is_authenticated %}
    <h1>Your Wishlists</h1>
    {% for wishlist in wishlists %}
    <h4>{{ wishlist.name }}</h4>
    <ul>
    {% for book in wishlist.books.all %}
    <li>{{ book.title }} <a href="{{book.get_add_to_cart_url}}"> <button type="button">Add to Cart</button> </a>
    <a href="{{book.get_remove_from_wishlist_url}}"> <button type="button">Remove from Wishlist</button> </a>

        <form action="{{book.get_transfer_wishlist_url}}" method="post">
            {% csrf_token %}
            Move to Wishlist:
            <select name="wish">
                {% for list in wishlists %}
            <option value="{{list.id}}">{{list.name}}</option>
                {% endfor %}
            </select>
            <input type="hidden" name="cwish" value="{{wishlist.id}}">
            <a href=""><button type="submit">Move</button></a>
        </form>

    </li>
    {% endfor %}
    </ul>
    {% endfor %}
    {% else %}
    <h1>Oops!</h1>
    <p>You are not <a href="{% url 'login' %}">logged in</a>.</p>
{% endif %}
<a href="newwish/">Add New Wishlist</a>
{% endblock %}